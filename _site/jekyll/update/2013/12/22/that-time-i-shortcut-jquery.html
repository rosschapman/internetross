<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>That Time I Shortcut jQuery</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">

    </head>
    <body>

        <div class="site">
          <div class="header">
            <h1 class="title"><a href="/">Your New Jekyll Site</a></h1>
            <a class="extra" href="/">home</a>
          </div>

          <h2>That Time I Shortcut jQuery</h2>
<p class="meta">22 Dec 2013</p>

<div class="post">
<h1>TLDR;</h1>

<p>Recently I had one of those moments writing jQuery when IE8 was being an asshat I was writing some code recently for Science Exchange to replace our nodejs web form file uploader - which was broken for IE 8 users - with a third-party utility, Ink&#39;s Filepicker.  In the process I attempted to take advantage of jQuery&#39;s deferred object methods to handle streaming the files to S3.  But I had some trouble.  But I found a workaround that I think was sorta cool so I wanted to share it.</p>

<p>After first reading up on handling promises in jQuery, I came up with a basic thesis for handling the S3 streaming:</p>

<p>When the user submitted the form I would
1) cache a separate API call for each file to send through Filepicker&#39;s S3 streaming method <code>filepicker.store</code> and then
2) execute the calls by passing them as an array to jQuery&#39;s $.when() method, doing something like:</p>

<div class="highlight"><pre><code class="javascript"><span class="nx">$</span><span class="p">.</span><span class="nx">when</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">$</span><span class="p">,</span> <span class="nx">promises</span><span class="p">);</span>
</code></pre></div>

<p>.  This worked really well, except in IE8.</p>

<p>with Ink&#39;s Filepicker utility.  Filepicker is probably the best managed asset solution I&#39;ve seen of this kind because it can accept files from many popular media management services. It also has a straightforward, well-documented API.</p>

<p>Filepicker will host files for you, but our app was designed to serve assets from S3.  Now, the Filepicker API does provide a method for S3 streaming called <code>filepicker.store</code>, but it falls slightly short because you can only pass the method one file at a time.</p>

<p>[^1]: Previously, users were restricted to uploading one file at a time, and if they made a mistake they had to reload the page.</p>

</div>


          <div class="footer">
            <div class="contact">
              <p>
                Your Name<br />
                What You Are<br />
                you@example.com
              </p>
            </div>
            <div class="contact">
              <p>
                <a href="https://github.com/yourusername">github.com/yourusername</a><br />
                <a href="https://twitter.com/yourusername">twitter.com/yourusername</a><br />
              </p>
            </div>
          </div>
        </div>

    </body>
</html>
