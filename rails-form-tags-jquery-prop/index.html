<!DOCTYPE html>
<html>
  <html lang="en">
  <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>Rails form tags, and jQuery prop().</title>
      <meta name="viewport" content="width=device-width">
      <meta name="description" content="front-end developer who blogs about shit everyone knows already">
      <link rel="stylesheet" href="/assets/css/syntax.css">
      <link rel="stylesheet" href="/assets/css/main.css">
  </head>
  <body>
    <div class="container">
      <main><article>
  <h1>Rails form tags, and jQuery prop().</h1>
  <time>03 Jan 2014</time>
  <img class="post-splash" src="" />
  <p>Each week I learn something new.  At the end of the week, I pick a couple of things to write about that I think are cool. You may
<a title="Share on Twitter" data-network="twitter" data-action="share" href="https://twitter.com/share?url=http://internetross.me/tiltw-dec-30-jan-3&amp;text=@internetross, I like you, but..." target="_blank">
disagree</a>.</p>

<h2>Ruby on Rails Form Tags</h2>

<p>I&#39;m staring at this form button...then I click it and the text changes from &quot;Save&quot; to &quot;Please wait...&quot;  With some digging I discover that Rails offers an easy way to add scripted UI interactions to your forms with attributes in form tags.  Take this example:</p>

<div class="highlight"><pre><code class="ruby"><span class="o">&lt;%=</span> <span class="n">form</span><span class="o">.</span><span class="n">submit</span> <span class="s1">&#39;Save&#39;</span><span class="p">,</span> <span class="n">disable_with</span><span class="p">:</span> <span class="s1">&#39;Please wait...&#39;</span><span class="p">,</span> <span class="ss">disabled</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span> <span class="ss">class</span><span class="p">:</span> <span class="s1">&#39;button&#39;</span> <span class="o">%&gt;</span>
</code></pre></div>

<p>Some of these attributes, such as `disabled: true&#39;, hook to a small library of jQuery scripts, <em>jquery-ujs</em>, that handle various form UI as well as data transportation methods. Rails calls these scripts <a href="http://github.com/rails/jquery-ujs/">“unobtrusive scripting adapters for jQuery”</a>.  Some call it magic.</p>

<h2>jQuery&#39;s prop() &amp; attr()</h2>

<p>I honestly think I&#39;ve never used jQuery&#39;s .prop() method before.  Not sure why, just haven&#39;t.  But, as you&#39;ve noticed from above, this week I was messing with form buttons in a Rails <a href="http://www.scienceexchange.com">app</a>, and thinking about button states, and then went down a small rabbit hole investigating jQuery attribute methods and the DOM.</p>

<p>While I was impressed with Rails&#39; opinionated (obscured, magic) tactic of form button state handling, I began thinking about alternative interaction paradigms for a button after click.  In that moment I had some daydream about a jQuery method for disabling attributes, like <code>.disabled()</code> or something.  So I googled for it, of course to be familiarly greeted in the top results by <code>.attr()</code> (duh), but also <code>.prop()</code>.</p>

<p>These two methods are really similar, but as I read the docs on both I realized I wasn&#39;t totally clear about the difference between a DOM property vs an attribute, and how to decide which of these methods to use for handling button states.</p>

<p>jQuery is partially to blame. Up until v1.6 was released in May of 2011 - basically around the time I started writing more  <a class="term-name" href="/glossary#production">production</a> jQuizzle - <code>.attr()</code> was the only method available to access properties or attributes.  v1.6 introduced <code>.prop()</code> because, as the jQuery docs maintain, &quot;the .attr() method sometimes took property values into account when retrieving some attributes, which could cause inconsistent behavior.&quot;  <code>.prop()</code> explicitly separated retrieval of property values and attributes.</p>

<p>But what, then, really IS a property vs an attribute.  Well, here&#39;s a comment on StackOverflow about properties:</p>

<blockquote>
<p>&quot;When a DOM node is created for a given HTML element, a corresponding property is created for each attribute in the HTML source code.&quot; <a href="http://stackoverflow.com/questions/6003819/properties-and-attributes-in-html">*</a></p>
</blockquote>

<p>Ah, so a property is actually a representation of an attribute in the DOM tree.</p>

<p>So how do they differ?  StackOverflow again:</p>

<blockquote>
<p>&quot;Where both a property and an attribute with the same name exists, usually updating one will update the other, but this is not the case for certain attributes of inputs, such as value and checked: for these attributes, the property always represents the current state while the attribute (except in old versions of IE) corresponds to the default value/checkedness of the input (reflected in the defaultValue / defaultChecked property).&quot; <a href="http://stackoverflow.com/questions/5874652/prop-vs-attr">*</a></p>
</blockquote>

<p>According to the above definition, <code>.prop()</code> is better suited for checking the value of attributes whose values we expect to change after DOM load.  For example, <code>value</code>, <code>checked</code>, and <code>disabled</code> will actually retain their serialized HTML attribute (value) after DOM load so if we were to alter these properties with javascript, retrieving their current value, after manipulation, would not be guaranteed by <code>attr()</code>.</p>

<p>Admittedly, this is all a little bit difficult to grasp at first considering the words themselves are so similar in meaning: &quot;attribute&quot;, &quot;property&quot;, and &quot;value&quot; are practically interchangeable in English vernacular. But it&#39;s so important - and more and more I find it myself to be true - that a jQuery dev understand how far the $ obfuscates a pure view of HTML and the DOM. It&#39;s totally possible to eff up your code if you were to mistakenly use <code>.attr()</code> at the wrong time! Sheesher.</p>

<p>Ok. First <a href="/glossary#tiltw">TILTW</a> episode complete.  Happy new year and talk soon!</p>

<p>Also, I&#39;m pretty new to technical writing. Would love to hear your <a title="Share on Twitter" data-network="twitter" data-action="share" href="https://twitter.com/share?url=http://internetross.me/tiltw-dec-30-jan-3&amp;text=@internetross, gotta tell you something bud..." target="_blank">
feedback</a>!</p>

</article>

<nav>
  
    <a class="previous" href="/that-time-i-shortcut-jquery/"><span class="arrow">&#10140;</span> Old revelations about jekyll and update</a>
  
  
    <a class="next" href="/jekyll-sunk-your-backbone-ship/"> &#10140; Futuristic notions about backbonejs and jekyll</a>
  
</nav></main>
      <header>
        <a href="/"><img class="gravatar" src="" width="230" height="230"/></a>
        <h1>About Me</h1>
        <p>I'm a web developer who works on the front parts of <a href="http://www.scienceexchange.com">Science Exchange</a>, an online marketplace for scientific collaboration.  I hope my work will quickly lead to the invention of the hover board and hyposprays. Like, <em>quickly</em>.</p>
        <p class="social">
          <a href="http://twitter.com/internetross">twitter</a>
          <a href="www.linkedin.com/in/rosschapman‎">linkedin</a>
        </p>
      </header>
    </div>
    <script type="text/javascript" src="http://code.jquery.com/jquery-2.1.0.min.js"></script>
    <script type="text/javascript" src="/lib/jquery.md5.js"></script>
    <script>
      // We have such a tiny amount of JS for this little site, let's just put it all on the page.
      $(function(){

        // Add my Gravatar.com avatar to the page.
        (function doGravatar() {
          var img = $('.gravatar');

          // Use md5 plugin to hash my email.
          var hash = $.md5('rosschapman@gmail.com').toLowerCase();

          // Get my avatar using Gravatar's amazingly simple API.
          var gravatar = 'http://www.gravatar.com/avatar/'+ hash + '?size=230';

          // Set img to my gravatar.
          img.attr('src',gravatar);
        })();
      });
    </script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-43971638-1');
      ga('send', 'pageview');
    </script>
  </body>
</html>
